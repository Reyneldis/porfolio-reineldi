---
import RevealOnScroll from './RevealOnScroll.astro';
import { PROJECTS } from '../data/projects';

function getImagePath(imageName: string) {
  return `/images/${imageName}`;
}
---

<section id="projects" class="relative py-20 scroll-mt-24">
  <div class="container max-w-6xl px-6 mx-auto">
    <div class="flex flex-col gap-6 mb-12 text-center">
      <h2
        class="relative inline-flex items-center justify-center gap-3 text-3xl font-bold md:text-4xl text-slate-900 dark:text-white font-display"
      >
        <!-- Icono Monitor -->
        <svg class="w-8 h-8 text-blue-600 dark:text-blue-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M3 5a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10z"/><path d="M7 20h10"/><path d="M9 16v4"/><path d="M15 16v4"/></svg>
        
        Proyectos
        <span
          class="absolute bottom-0 w-24 h-1 transform -translate-x-1/2 rounded-full left-1/2 bg-gradient-to-r from-blue-500 to-purple-500"
        ></span>
      </h2>
      <p
        class="max-w-2xl mx-auto text-lg leading-relaxed text-slate-700 dark:text-slate-300"
      >
        Una selección de mis trabajos recientes y proyectos personales.
      </p>
    </div>

    <!-- Grid configurado con tus ajustes (md:grid-cols-2 y md:px-32) -->
    <div class="grid grid-cols-1 gap-3 md:px-32 md:grid-cols-2 lg:grid-cols-2 place-items-center">
      {PROJECTS.map((project) => (
        <article
          class="flex flex-col w-full max-w-[380px] h-full overflow-hidden transition-all duration-300 bg-white border rounded-2xl border-slate-200 dark:bg-slate-800 dark:border-slate-700 hover:shadow-xl hover:border-blue-300 dark:hover:border-blue-500 hover:-translate-y-1 text-left"
        >
          <a href={`/projects/${project.slug}`} class="block overflow-hidden">
            <img
              src={getImagePath(project.image)}
              alt={`Imagen del proyecto ${project.title}`}
              class="object-cover w-full h-48 transition-transform duration-500 group-hover:scale-110"
              loading="lazy"
            />
          </a>
          
          <!-- Contenedor interno alineado a la izquierda -->
          <div class="flex flex-col items-start flex-1 p-6 text-left">
            
            <div class="flex gap-2 mb-3">
              <span
                class="px-3 py-1 text-xs font-semibold text-blue-800 bg-blue-100 rounded-full dark:bg-blue-900/40 dark:text-blue-200"
              >
                {project.tech[0]}
              </span>
            </div>
            
            <h3
              class="mb-2 text-xl font-bold text-slate-900 dark:text-slate-100"
            >
              <a href={`/projects/${project.slug}`} class="transition-colors hover:underline hover:text-blue-600 dark:hover:text-blue-400">
                {project.title}
              </a>
            </h3>
            
            <p
              class="flex-grow mb-6 text-sm leading-relaxed text-slate-600 dark:text-slate-400"
            >
              {project.description}
            </p>
            
            <!-- BOTONES: w-full en móvil, sm:w-auto en escritorio -->
            <div class="flex flex-col items-start w-full gap-3 mt-auto sm:flex-row">
              
              <!-- Botón Demo -->
              <a
                href={project.link}
                target="_blank"
                rel="noopener noreferrer"
                class="flex items-center justify-center w-full gap-2 px-4 py-2 text-sm font-semibold text-white transition-colors bg-blue-600 rounded-lg hover:bg-blue-700 sm:w-auto dark:bg-blue-600 dark:hover:bg-blue-500"
                aria-label="Ver demo en vivo"
              >
                <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                Demo
              </a>

              <!-- Botón GitHub -->
              <a
                href={project.github}
                target="_blank"
                rel="noopener noreferrer"
                class="flex items-center justify-center w-full gap-2 px-4 py-2 text-sm font-semibold transition-colors border rounded-lg border-slate-300 text-slate-700 hover:bg-slate-50 sm:w-auto dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-700/50"
                aria-label="Ver código en GitHub"
              >
                <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" /></svg>
                GitHub
              </a>

            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>